<?xml version="1.0" encoding="utf-8"?>

<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewModels="clr-namespace:TalkyTiles.Core.ViewModels;assembly=TalkyTiles.Core"
    x:Class="TalkyTiles.MobileApp.Views.TileButtonView"
    x:DataType="viewModels:SoundButtonViewModel"
    BackgroundColor="Transparent"
    WidthRequest="100"
    HeightRequest="100">

    <Frame
        WidthRequest="100"
        HeightRequest="100"
        BackgroundColor="LightCoral"
        HasShadow="True"
        CornerRadius="20">

        <Frame.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding PlayAudioCommand}" />
            <PanGestureRecognizer PanUpdated="OnPanUpdated" />
        </Frame.GestureRecognizers>

        <VerticalStackLayout>
            <Label Text="{Binding DisplayText}"
                   TextColor="White"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />

            <Button Text="🎙️ Record"
                    FontSize="12"
                    Command="{Binding RecordAudioCommand}"
                    IsVisible="{Binding IsRecording, Converter={StaticResource InverseBoolConverter}}" />

            <StackLayout IsVisible="{Binding IsRecording}"
                         Orientation="Horizontal"
                         Spacing="10"
                         HorizontalOptions="Center">
                <Label Text="{Binding SecondsRemaining}" TextColor="White" />
                <Button Text="🛑 Stop"
                        Command="{Binding StopRecordingCommand}"
                        FontSize="12" />
            </StackLayout>
        </VerticalStackLayout>

    </Frame>
    <!-- <ContentView.GestureRecognizers> -->
    <!--     <PanGestureRecognizer PanUpdated="OnPanUpdated" /> -->
    <!-- </ContentView.GestureRecognizers> -->
</ContentView>
<!-- <ContentView -->
<!--     xmlns="http://schemas.microsoft.com/dotnet/2021/maui" -->
<!--     xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" -->
<!--     xmlns:viewModels="clr-namespace:TalkyTiles.ViewModels" -->
<!--     xmlns:local="clr-namespace:TalkyTiles.Views" -->
<!--     x:Class="TalkyTiles.Views.TileButtonView" -->
<!--     x:Name="Root" -->
<!--     x:DataType="viewModels:SoundButtonViewModel" -->
<!--     BackgroundColor="Transparent"> -->
<!-- -->
<!--     <Button -->
<!--         Text="{Binding DisplayText}" -->
<!--         Command="{Binding PlayAudioCommand}" -->
<!--         BackgroundColor="LightBlue" -->
<!--         TextColor="Black" -->
<!--         WidthRequest="100" -->
<!--         HeightRequest="100" -->
<!--         CornerRadius="20" /> -->
<!--     <ContentView.GestureRecognizers> -->
<!--         <PanGestureRecognizer PanUpdated="OnPanUpdated" /> -->
<!--     </ContentView.GestureRecognizers> -->
<!-- -->
<!-- </ContentView> -->
